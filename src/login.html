<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Railway Management System - Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#4477FF",
              secondary: "#F3F6FF",
            },
            borderRadius: {
              none: "0px",
              sm: "4px",
              DEFAULT: "8px",
              md: "12px",
              lg: "16px",
              xl: "20px",
              "2xl": "24px",
              "3xl": "32px",
              full: "9999px",
              button: "8px",
            },
          },
        },
      };
    </script>
    <style>
      :where([class^="ri-"])::before { content: "\f3c2"; }
      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
      }
    </style>
  </head>
  <body class="bg-secondary min-h-screen">
    <nav class="bg-white shadow-sm">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex items-center">
            <a href="/" class="flex items-center">
              <span class="text-2xl font-['Pacifico'] text-primary">logo</span>
            </a>
          </div>
          <div class="flex items-center space-x-4">
            <span class="text-sm text-green-500 flex items-center">
              <i class="ri-checkbox-circle-line mr-1"></i>
              System Operational
            </span>
            <div class="flex items-center space-x-2">
              <span class="text-sm text-gray-600">English</span>
              <i class="ri-arrow-down-s-line text-gray-600"></i>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <div class="max-w-md mx-auto">
        <div class="text-center mb-8">
          <h2 class="text-3xl font-bold text-gray-900 mb-2">Welcome Back</h2>
          <p class="text-gray-600">Please enter your credentials to login</p>
        </div>
        <div class="bg-white shadow-lg rounded-lg p-8">
          <div class="grid grid-cols-2 gap-4 mb-8">
            <button
              onclick="showLoginForm('user')"
              class="p-6 text-center border rounded-button hover:bg-primary hover:text-white transition-colors"
            >
              <i class="ri-user-line text-3xl mb-3"></i>
              <div class="text-base">User Login</div>
            </button>
            <button
              onclick="showAdminOptions()"
              class="p-6 text-center border rounded-button hover:bg-primary hover:text-white transition-colors"
            >
              <i class="ri-admin-line text-3xl mb-3"></i>
              <div class="text-base">Admin Login</div>
            </button>
          </div>
          <div
            id="adminOptions"
            class="grid grid-cols-3 gap-4 mb-8"
            style="display: none;"
          >
            <button
              onclick="showLoginForm('cleanliness')"
              class="p-6 text-center border rounded-button hover:bg-primary hover:text-white transition-colors"
            >
              <i class="ri-broom-line text-3xl mb-3"></i>
              <div class="text-base">Cleanliness Management</div>
            </button>
            <button
              onclick="showLoginForm('ticket')"
              class="p-6 text-center border rounded-button hover:bg-primary hover:text-white transition-colors"
            >
              <i class="ri-ticket-line text-3xl mb-3"></i>
              <div class="text-base">Ticket Management</div>
            </button>
            <button
              onclick="showLoginForm('canteen')"
              class="p-6 text-center border rounded-button hover:text-white transition-colors"
            >
              <i class="ri-restaurant-line text-3xl mb-3"></i>
              <div class="text-base">Canteen Management</div>
            </button>
          </div>
          <form id="loginForm" class="space-y-6" style="display: none;" onsubmit="handleLogin(event)">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Username</label
              >
              <div class="relative">
                <div
                  class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                >
                  <i class="ri-user-line text-gray-400"></i>
                </div>
                <input
                  type="text"
                  id="username"
                  class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-button text-sm"
                  placeholder="Enter your username"
                />
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Password</label
              >
              <div class="relative">
                <div
                  class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                >
                  <i class="ri-lock-line text-gray-400"></i>
                </div>
                <input
                  type="password"
                  id="password"
                  class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-button text-sm"
                  placeholder="Enter your password"
                />
              </div>
            </div>
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <input
                  type="checkbox"
                  class="h-4 w-4 text-primary border-gray-300 rounded"
                />
                <label class="ml-2 block text-sm text-gray-700"
                  >Remember me</label
                >
              </div>
              <a href="#" class="text-sm text-primary hover:text-primary-dark"
                >Forgot password?</a
              >
            </div>
            <button
              type="submit"
              class="w-full bg-primary text-white py-2 px-4 rounded-button hover:bg-blue-600 transition-colors"
            >
              Sign in
            </button>
            <div class="mt-4 text-center">
              <span class="text-sm text-gray-600">Don't have an account?</span>
              <button
                onclick="showRegistrationForm()"
                class="ml-1 text-sm text-primary hover:text-blue-600"
              >
                Register now
              </button>
            </div>
          </form>
          <form id="registrationForm" class="space-y-6" style="display: none;">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Full Name</label
              >
              <div class="relative">
                <div
                  class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                >
                  <i class="ri-user-line text-gray-400"></i>
                </div>
                <input
                  type="text"
                  class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-button text-sm"
                  placeholder="Enter your full name"
                />
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Email</label
              >
              <div class="relative">
                <div
                  class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                >
                  <i class="ri-mail-line text-gray-400"></i>
                </div>
                <input
                  type="email"
                  class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-button text-sm"
                  placeholder="Enter your email"
                />
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Password</label
              >
              <div class="relative">
                <div
                  class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                >
                  <i class="ri-lock-line text-gray-400"></i>
                </div>
                <input
                  type="password"
                  class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-button text-sm"
                  placeholder="Create a password"
                />
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2"
                >Confirm Password</label
              >
              <div class="relative">
                <div
                  class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                >
                  <i class="ri-lock-line text-gray-400"></i>
                </div>
                <input
                  type="password"
                  class="block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-button text-sm"
                  placeholder="Confirm your password"
                />
              </div>
            </div>
            <button
              type="submit"
              class="w-full bg-primary text-white py-2 px-4 rounded-button hover:bg-blue-600 transition-colors"
            >
              Register
            </button>
            <div class="mt-4 text-center">
              <span class="text-sm text-gray-600"
                >Already have an account?</span
              >
              <button
                onclick="showLoginForm('user')"
                class="ml-1 text-sm text-primary hover:text-blue-600"
              >
                Sign in
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
    
    <script>
      function handleLogin(event) {
          event.preventDefault(); // Prevent form submission
  
          const username = document.getElementById("username").value.trim();
          const password = document.getElementById("password").value.trim();
  
          if (!username || !password) {
              alert("Please enter valid credentials!");
              return;
          }
  
          // Determine the role based on the form title or other logic
          const role = document.querySelector("h2").textContent.toLowerCase();
  
          if (role.includes("cleanliness")) {
              // Admin Login (Cleanliness Management)
              if (username === "admin" && password === "admin123") {
                  localStorage.setItem("isAdminLoggedIn", "true");
                  alert("Login successful! Redirecting to Cleanliness Management...");
                  window.location.href = "cleanliness-management.html"; // Redirect to admin dashboard
              } else {
                  alert("Invalid admin credentials!"); // Show error for invalid admin credentials
              }
          } else if (role.includes("ticket")) {
              // Admin Login (Ticket Management)
              if (username === "ticketadmin" && password === "ticket123") {
                  localStorage.setItem("isTicketAdminLoggedIn", "true");
                  alert("Login successful! Redirecting to Ticket Management...");
                  window.location.href = "ticket-management.html"; // Redirect to ticket management dashboard
              } else {
                  alert("Invalid ticket admin credentials!"); // Show error for invalid ticket admin credentials
              }
          } else if (role.includes("canteen")) {
              // Admin Login (Canteen Management)
              if (username === "canteenadmin" && password === "canteen123") {
                  localStorage.setItem("isCanteenAdminLoggedIn", "true");
                  alert("Login successful! Redirecting to Canteen Management...");
                  window.location.href = "canteen-management.html"; // Redirect to canteen management dashboard
              } else {
                  alert("Invalid canteen admin credentials!"); // Show error for invalid canteen admin credentials
              }
          } else {
              // User Login (Less Specific)
              if (username && password) { // Allow any non-empty username and password
                  localStorage.setItem("isLoggedIn", "true");
                  alert("Login successful! Redirecting...");
                  window.location.href = "index.html"; // Redirect to user home page
              } else {
                  alert("Invalid credentials!"); // Show error for invalid credentials
              }
          }
      }
  
      // Check login state and redirect if already logged in
      document.addEventListener("DOMContentLoaded", () => {
          const isLoggedIn = localStorage.getItem("isLoggedIn");
          const isAdminLoggedIn = localStorage.getItem("isAdminLoggedIn");
          const isTicketAdminLoggedIn = localStorage.getItem("isTicketAdminLoggedIn");
          const isCanteenAdminLoggedIn = localStorage.getItem("isCanteenAdminLoggedIn");
  
          if (isLoggedIn === "true") {
              window.location.href = "index.html"; // Redirect users to home page
          } else if (isAdminLoggedIn === "true") {
              window.location.href = "cleanliness-management.html"; // Redirect cleanliness admins to dashboard
          } else if (isTicketAdminLoggedIn === "true") {
              window.location.href = "ticket-management.html"; // Redirect ticket admins to dashboard
          } else if (isCanteenAdminLoggedIn === "true") {
              window.location.href = "canteen-management.html"; // Redirect canteen admins to dashboard
          }
      });
  </script>

    <script>
      function showAdminOptions() {
        const adminOptions = document.getElementById("adminOptions");
        const loginForm = document.getElementById("loginForm");
        const registrationForm = document.getElementById("registrationForm");

        adminOptions.style.display = "grid";
        loginForm.style.display = "none";
        registrationForm.style.display = "none";
      }
      function showLoginForm(role) {
        const loginForm = document.getElementById("loginForm");
        const registrationForm = document.getElementById("registrationForm");
        const registrationLink = document.querySelector("#loginForm .mt-4");
        const adminOptions = document.getElementById("adminOptions");
        loginForm.style.display = "block";
        registrationForm.style.display = "none";
        adminOptions.style.display = "none";
        // Only show registration option for user role
        registrationLink.style.display = role === "user" ? "block" : "none";
        // Update form title based on role
        const roleMessages = {
          user: "User Login",
          cleanliness: "Cleanliness Management Login",
          ticket: "Ticket Management Login",
          canteen: "Canteen Management Login",
        };
        document.querySelector("h2").textContent =
          roleMessages[role] || "Welcome Back";
        document.querySelector("#loginForm").addEventListener("submit", function (e) {
          e.preventDefault();
          const username = document.querySelector(
            '#loginForm input[type="text"]',
          ).value;
          const password = document.querySelector(
            '#loginForm input[type="password"]',
          ).value;
          if (!username || !password) {
            showNotification("Please fill in all fields", "error");
            return;
          }
          showNotification(`${roleMessages[role]} successful!`, "success");
        });
      }
      function showRegistrationForm() {
        const loginForm = document.getElementById("loginForm");
        const registrationForm = document.getElementById("registrationForm");
        loginForm.style.display = "none";
        registrationForm.style.display = "block";
        document
          .querySelector("#registrationForm")
          .addEventListener("submit", function (e) {
            e.preventDefault();
            const fullName = document.querySelector(
              '#registrationForm input[type="text"]',
            ).value;
            const email = document.querySelector(
              '#registrationForm input[type="email"]',
            ).value;
            const password = document.querySelector(
              '#registrationForm input[type="password"]',
            ).value;
            const confirmPassword = document.querySelector(
              '#registrationForm input[type="password"]:last-of-type',
            ).value;
            if (!fullName || !email || !password || !confirmPassword) {
              showNotification("Please fill in all fields", "error");
              return;
            }
            if (password !== confirmPassword) {
              showNotification("Passwords do not match", "error");
              return;
            }
            if (password.length < 6) {
              showNotification("Password must be at least 6 characters", "error");
              return;
            }
            showNotification("Registration successful!", "success");
            setTimeout(() => {
              showLoginForm("user");
            }, 1500);
          });
      }
      function showNotification(message, type) {
        const notification = document.createElement("div");
        notification.className = `fixed top-4 right-4 p-4 rounded-lg text-white ${type === "error" ? "bg-red-500" : "bg-green-500"} transition-opacity duration-300`;
        notification.textContent = message;
        document.body.appendChild(notification);
        setTimeout(() => {
          notification.style.opacity = "0";
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }
    </script>
  </body>
</html>
